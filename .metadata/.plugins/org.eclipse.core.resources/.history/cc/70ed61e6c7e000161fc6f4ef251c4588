"use stict"

app.factory('JobServices',['$http','$q','$rootScope',function($http,$q,$rootScope)
                          {
	
	console.log("Starting ==>  JobServices")

								var BaseURL='http://localhost:8088/collaborationback'
								return{
											
									
											fetchAllJobs : function(){
												console.log("JobServices ==> Starting fetchAllJobs function()")

												return $http.get(BaseURL+'/getOpenJobs').then
												(
														function(Response){
															console.log("JobServices ==> Ending fetchAllJobs function()")

															return Response.data;
														},
														null
												)
											},
											
											
											fetchAllJobApplications : function(){
												console.log("JobServices ==> Starting fetchAllJobs function()")

												return $http.get(BaseURL+'/allJobApplications').then
												(
														function(Response){
															console.log("JobServices ==> Ending fetchAllJobs function()")

															return Response.data;
														},
														null
												)
											},
											
											createJob : function(job){
												console.log("JobServices ==> Starting fetchAllJobs function()")

												return $http.post(BaseURL+'/savejob/',job).then
												(
														function(Response)
														{
															return Response.data;
														},
														function(errResponse)
														{
															return $q.reject(errResponse)
														}
												)
											},
											
											jobById : function(id){
												console.log("JobServices ==> Starting fetchAllJobs function()")

												return $http.get(BaseURL+'/jobById/'+id).then
												(
														function(Response)
														{
															return Response.data
														},
														function(errResponse)
														{
															$q.reject(errResponse)
														}
												)
											},
											
											updateJob : function(job){
												console.log("JobServices ==> Starting fetchAllJobs function()")

												return $http.put(BaseURL+'/updateuser',job).then
												(
														function(Response)
														{
															return Response.data;
														},
														function(errResponse)
														{
															return $q.reject(errResponse)
															
														}
												)
											},
											
											
											applyForJob : function(jobId)
											{
												console.log("JobServices ==> Starting fetchAllJobs function()")

												return $http.post(BaseURL	+'/applyForJob/'+jobId).then
												(
														function(Response)
														{
															return Response.data;
														},
														function(errResponse)
														{
															console.error("Error While Applying For Job")
															return $q.reject(errResponse)
														}
												)
											}
									  }
                          }])
